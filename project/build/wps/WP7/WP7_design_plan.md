## WP7 Design Plan: Project Profile Engine

### 🔄 Objective
Create a dynamic `ProjectProfile` engine that:
- Stores project-level configuration
- Syncs with toolchains and DB
- Injects project context into planning, generation, and validation

---

### 📊 Scope & Components

#### 💡 New DB Table: `ProjectProfile`
| Field | Type | Description |
|-------|------|-------------|
| project_id | TEXT (PK) | Unique project key |
| title | TEXT | User-provided project title |
| sponsor | TEXT | Department or agency lead |
| project_type | TEXT | Type (e.g., transit, broadband) |
| total_budget | NUMERIC | Optional cost info |
| start_date | DATE | Program start |
| end_date | DATE | End or projected completion |
| strategic_alignment | TEXT | Freeform policy alignment note |
| current_gate | INT | For toolchain routing |
| last_updated | TIMESTAMP | Autogenerated |

#### 🔹 Toolchain Injection Points
- `GenerateSectionChain.run()`
  - Inject `project_profile` into memory bundle
- `AssembleArtifactChain.run()`
  - Include title and budget in PDF header
- `planner_orchestrator.py`
  - Auto-load `ProjectProfile` for each session

#### 🔹 Storage Logic
- `memory_sync.py`
  - Add `save_project_profile()` and `load_project_profile()`
  - Inject during planner boot and section save

#### 🔹 Drive Routing Enhancements
- Update `storeToDrive.py` to optionally include `project_id` in subfolder tree
  - New format: `PolicyGPT/<project_id>/gate_<gate_id>/<artifact_id>/`

---

### ⚖️ Assumptions
- One `ProjectProfile` per project_id (many artifacts)
- `project_id` inferred from artifact metadata or session context
- Human provides at least minimal config in initial session

---

### 🚧 Risks
- Drive folder schema changes must be backward compatible
- Circular dependencies between profile + planner injection
- Session routing errors if `project_id` is missing

---

### 📖 Outputs
- Code: `project_profile_engine.py` (store, load, validate)
- Migration: Patch for new table
- Patch: `storeToDrive.py`, `memory_sync.py`, `generate_section_chain.py`, `assemble_artifact_chain.py`
- Docs: YAML schema + usage notes