### üöÄ WP3b Midpoint Update ‚Äî Tool Wrapping + API

**Work Package:** WP3b ‚Äì Tool Wrapping + API  
**Location:** `project/build/wps/WP3b/WP3b_definition.md`  
**Task ID:** 2.2_build_and_patch

---

### ‚úÖ Status by Deliverable Category

| Deliverable | Status | Notes |
|------------|--------|-------|
| Tool Registry system for wrapping external tools | ‚úÖ Done | Fully implemented: dynamic loader, API endpoints, validation hooks. See: [`tool_registry.py`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/app/tools/tool_registry.py) |
| CLI-first testing + API endpoints | ‚úÖ Done | All tools testable via local CLI and REST calls. See: [`api_router.py`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/app/engines/api_router.py) |
| Schema-based validation (runtime) | ‚úÖ Done | Uses YAML-defined schemas per tool. Hooks injected dynamically. See: [`tool_catalog.yaml`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/project/reference/tool_catalog.yaml) |
| gpt_tools_manifest.json | ‚úÖ Done | Autogenerated from schemas for GPT plugin. See: [`gpt_tools_manifest.json`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/project/reference/gpt_tools_manifest.json) |
| Sample tool implementations | üö´ Deferred | Logic for actual tools deferred to downstream WPs (see routing below) |
| Registry Documentation | ‚úÖ Done | System overview + design choices documented. See: [`tool_registry_system.md`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/project/build/wps/WP3b/tool_registry_system.md) |
| Git-based loading option | ‚è≥ In Progress | Local loader works. Git loader slated for 2nd phase (planned) |

---

### üß† Notes + Traceability
- Tools are stubbed only ‚Äî full implementations should be completed by WPs that own functional logic.
- This registry allows PolicyGPT to:
  - Discover tools via `/tools` endpoint
  - Validate params before runtime
  - Route requests generically via `/tools/{tool_id}`
  - Integrate with GPT via OpenAPI and GPT manifest

---

### üì¶ Tool Handoff Routing
| Tool | Handoff WP | Justification |
|------|------------|---------------|
| `compose_and_cite` | WP4 | Part of synthesis + smart draft chain |
| `searchKnowledgeBase` | WP4 | Uses internal memory embedding index |
| `externalWebSearch` | WP13 | Fetches external data via web search |
| `composeDraft` | WP4 | Structured draft generation from YAML |
| `validateSection` | WP5 | Section QA + field enforcement logic |
| `logReasoningTrace` | WP7 | Logs per-run rationale, supports traceability |
| `commitSection` | WP6 | Section DB + Drive integration logic |
| `commitDocument` | WP6 | Whole artifact commit routine |
| `fetchDocument` | WP6 | Document and section retriever |
| `getTokenUsage` | WP2 | GPT session monitoring |
| `translateDocument` | WP10 | EN/FR dual mode translation tooling |
| `queryAirtable` | WP15 | Lookup from policy reference mappings |
| `parseTranscript` | WP11 | NLP tool for voice-of-customer notes |
| `loadCorpus` | WP16 | Corpus embedding / memory sync pipeline |
| `doc_feedback_to_task` | WP8 | Turns feedback into planning tasks |
| `diff_and_summarize_sections` | WP5 | Compares and summarizes content changes |
| `submitDocumentFeedback` | WP8 | Collects feedback from humans-in-the-loop |
| `summarize_feedback_log` | WP8 | Clusters and summarizes feedback entries |

If a WP needs to implement any of the above:
- Refer to: [`tool_registry_system.md`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/project/build/wps/WP3b/tool_registry_system.md)
- Use standard wrapper pattern in: [`__init__.py`](https://github.com/stewmckendry/ai-delivery-sandbox/blob/sandbox-curious-falcon/app/tools/tool_wrappers/__init__.py)

---

### üö© Gaps or Needs Attention
- No WPs currently own `compose_and_cite` chain end-to-end. Recommend coordination across WP4, WP5, WP6.
- Git-based loader will need deployment instructions and QA coverage in WP3c.

---