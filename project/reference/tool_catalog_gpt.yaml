tools:
  uploadTextInput:
    description: Ingest freeform text input into the memory system
    module: app.tools.tool_wrappers.uploadTextInput
    class: Tool
    schema:
      type: object
      properties:
        text:
          type: string
        metadata:
          type: object
          properties:
            gate_id:
              type: integer
            artifact_id:
              type: string
            section_id:
              type: string
            intent:
              type: string
            session_id:
              type: string
            user_id:
              type: string
        log_usage:
          type: boolean
          description: Optional. If false, tool usage logging will be skipped (used
            when chained).
      required:
      - text
  uploadFileInput:
    description: Extract and ingest file contents into the memory system
    module: app.tools.tool_wrappers.uploadFileInput
    class: Tool
    schema:
      type: object
      properties:
        file_path:
          type: string
        file_content:
          type: string
        metadata:
          type: object
          properties:
            gate_id:
              type: integer
            artifact_id:
              type: string
            section_id:
              type: string
            intent:
              type: string
            session_id:
              type: string
            user_id:
              type: string
        log_usage:
          type: boolean
          description: Optional. If false, tool usage logging will be skipped (used
            when chained).
      anyOf:
      - required:
        - file_path
      - required:
        - file_content
  uploadLinkInput:
    description: Scrape and ingest webpage content into the memory system
    module: app.tools.tool_wrappers.uploadLinkInput
    class: Tool
    schema:
      type: object
      properties:
        url:
          type: string
        metadata:
          type: object
          properties:
            gate_id:
              type: integer
            artifact_id:
              type: string
            section_id:
              type: string
            intent:
              type: string
            session_id:
              type: string
            user_id:
              type: string
        log_usage:
          type: boolean
          description: Optional. If false, tool usage logging will be skipped (used
            when chained).
      required:
      - url
  loadCorpus:
    module: app.tools.tool_wrappers.loadCorpus
    class: Tool
    description: Embeds and indexes documents into KB
    schema:
      type: object
      properties:
        file_contents:
          type: string
        file_name:
          type: string
        metadata:
          type: object
          additionalProperties: true
          properties:
            title:
              type: string
              description: Title of the document for citation
            source:
              type: string
              description: Source or publication origin of the document
            date:
              type: string
              format: date
              description: Date of publication or indexing in ISO format
      required:
      - file_contents
  queryCorpus:
    module: app.tools.tool_wrappers.queryCorpus
    class: Tool
    description: Queries a vector-embedded document corpus for alignment
    schema:
      type: object
      properties:
        query:
          type: string
      required:
      - query
  inputPromptGenerator:
    description: Generate structured input prompts based on gate metadata
    module: app.tools.tool_wrappers.inputPromptGenerator
    class: Tool
    schema:
      type: object
      properties:
        gate_id:
          type: integer
        artifact_id:
          type: string
        section_id:
          type: string
      required:
      - gate_id
      - artifact_id
  ingestInput:
    description: Ingests content from user text, file, or URL and generates or updates
      the associated project profile.
    module: app.engines.toolchains.IngestInputChain
    class: IngestInputChain
    schema:
      type: object
      properties:
        input_method:
          type: string
          enum:
          - text
          - file
          - link
          description: Indicates which upload method to use
        text:
          type: string
          description: Used if input_method is 'text'
        file_path:
          type: string
          description: Path to file if input_method is 'file'
        file_content:
          type: string
          description: Alternative to file_path if uploading raw content
        url:
          type: string
          description: Used if input_method is 'link'
        metadata:
          type: object
          properties:
            gate_id:
              type: integer
            artifact_id:
              type: string
            section_id:
              type: string
            intent:
              type: string
            session_id:
              type: string
            user_id:
              type: string
            project_id:
              type: string
          required:
          - artifact_id
      required:
      - input_method
      - metadata
      oneOf:
      - required:
        - text
      - required:
        - file_path
      - required:
        - file_content
      - required:
        - url
  generateSectionChain:
    description: Generates a draft section by retrieving memory, synthesizing, and
      refining text.
    module: app.engines.toolchains.generate_section_chain
    class: GenerateSectionChain
    schema:
      type: object
      properties:
        artifact:
          type: string
        section:
          type: string
        gate_id:
          type: string
        session_id:
          type: string
        user_id:
          type: string
        project_id:
          type: string
      required:
      - artifact
      - section
  webSearch:
    module: app.tools.tool_wrappers.web_search
    class: Tool
    description: Performs external web or domain-specific search and returns formatted
      summaries
    schema:
      type: object
      properties:
        query:
          type: string
        search_type:
          type: string
        search_filter:
          type: object
      required:
      - query
      - search_type
  goc_alignment_search:
    module: app.tools.tool_wrappers.goc_alignment_search
    class: Tool
    description: Performs government policy alignment search scoped to .gc.ca domains
      and returns structured results
    schema:
      type: object
      properties:
        query:
          type: string
        context:
          type: object
      required:
      - query
  assembleArtifactChain:
    description: Loads section metadata, formats and merges content, finalizes a document,
      and saves it to Drive.
    module: app.engines.toolchains.assemble_artifact_chain
    class: AssembleArtifactChain
    schema:
      type: object
      properties:
        artifact_id:
          type: string
        gate_id:
          type: string
        version:
          type: string
        project_id:
          type: string
      required:
      - artifact_id
      - gate_id
  revise_section_chain:
    description: Revise one or more artifact sections based on user feedback, memory
      context, and structured feedback mapping.
    module: app.engines.toolchains.revise_section_chain
    class: ReviseSectionChain
    schema:
      type: object
      properties:
        session_id:
          type: string
        artifact:
          type: string
        gate_id:
          type: string
        user_id:
          type: string
        project_id:
          type: string
        feedback_entries:
          type: array
          description: Array of user feedback entries to revise sections
          items:
            type: object
            properties:
              text:
                type: string
              section_id:
                type: string
              type:
                type: string
      required:
      - session_id
      - artifact
      - feedback_entries
      - user_id
      - project_id
  generate_artifact_chain:
    description: Generates all sections for an artifact using shared global context,
      then assembles into a complete document.
    module: app.engines.toolchains.generate_artifact_chain
    class: GenerateArtifactChain
    schema:
      type: object
      properties:
        gate_id:
          type: integer
        artifact:
          type: string
        session_id:
          type: string
        user_id:
          type: string
        project_id:
          type: string
      required:
      - gate_id
      - artifact
      - session_id
      - user_id
      - project_id
  generate_global_context_chain:
    description: Runs global research using corpus search, web search, and GoC alignment
      tools, logging results for downstream use.
    module: app.engines.toolchains.generate_global_context_chain
    class: GenerateGlobalContextChain
    schema:
      type: object
      properties:
        session_id:
          type: string
        user_id:
          type: string
        project_id:
          type: string
        artifact_id:
          type: string
        search_filter:
          type: object
          description: Optional filters for tailoring web search (e.g., jurisdiction,
            topics)
      required:
      - session_id
      - user_id
      - project_id
      - artifact_id
  fetch_artifact_chunk:
    description: Fetch a specific chunk of an artifact from Redis storage for streaming
      to the user or GPT.
    module: app.tools.tool_wrappers.fetchArtifactChunk
    class: Tool
    schema:
      type: object
      properties:
        session_id:
          type: string
        artifact_id:
          type: string
        chunk_id:
          type: string
      required:
      - session_id
      - artifact_id
      - chunk_id
  save_artifact_chunks:
    description: Chunk and save a drafted artifact to Redis using token thresholds
      for LLM-safe streaming.
    module: app.tools.tool_wrappers.saveArtifactChunks
    class: Tool
    schema:
      type: object
      properties:
        session_id:
          type: string
        artifact_id:
          type: string
        gate_id:
          type: string
        max_token:
          type: integer
          default: 1500
          description: Optional override for the max token size per chunk.
      required:
      - session_id
      - artifact_id
      - gate_id
  section_review_fetcher:
    description: Retrieve section revision text and diff summary from Redis for a
      specific section.
    module: app.tools.tool_wrappers.section_review_fetcher
    class: Tool
    schema:
      type: object
      properties:
        session_id:
          type: string
        project_id:
          type: string
        artifact_id:
          type: string
        section_id:
          type: string
      required:
      - session_id
      - project_id
      - artifact_id
      - section_id
  record_research:
    description: Record free-form research notes (with optional metadata) and structure
      them for global context reuse.
    module: app.tools.tool_wrappers.record_research
    class: Tool
    schema:
      type: object
      properties:
        session_id:
          type: string
        project_id:
          type: string
        user_id:
          type: string
        notes:
          type: string
          description: Free-form research notes
        metadatas:
          type: array
          items:
            type: object
            properties:
              text:
                type: string
              title:
                type: string
              source:
                type: string
              date:
                type: string
              url:
                type: string
              citation:
                type: string
          description: Optional pre-structured metadata if available
      required:
      - session_id
      - project_id
      - notes
