{
  "tools": [
    {
      "tool_id": "inputChecker",
      "description": "Validate user inputs against required metadata and completeness",
      "input_schema": {
        "type": "object",
        "properties": {
          "gate_id": { "type": "integer" },
          "artifact_id": { "type": "string" },
          "section_id": { "type": "string" },
          "inputs": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "required": ["gate_id", "artifact_id", "section_id", "inputs"]
      }
    },
    {
      "tool_id": "inputPromptGenerator",
      "description": "Generate structured input prompts based on gate metadata",
      "input_schema": {
        "type": "object",
        "properties": {
          "gate_id": { "type": "integer" },
          "artifact_id": { "type": "string" },
          "section_id": { "type": "string" }
        },
        "required": ["gate_id", "artifact_id", "section_id"]
      }
    },
    {
      "tool_id": "compose_and_cite",
      "description": "Orchestrates evidence search → synthesis → draft → validate",
      "input_schema": {
        "type": "object",
        "properties": {
          "prompt": { "type": "string" },
          "gate_id": { "type": "integer" }
        },
        "required": ["prompt", "gate_id"]
      }
    },
    {
      "tool_id": "searchKnowledgeBase",
      "description": "Retrieves semantic matches from embedded documents",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" }
        },
        "required": ["query"]
      }
    },
    {
      "tool_id": "externalWebSearch",
      "description": "Pulls evidence from trusted web sources",
      "input_schema": {
        "type": "object",
        "properties": {
          "query": { "type": "string" }
        },
        "required": ["query"]
      }
    },
    {
      "tool_id": "composeDraft",
      "description": "Generates structured markdown from YAML + evidence",
      "input_schema": {
        "type": "object",
        "properties": {
          "yaml_input": { "type": "string" }
        },
        "required": ["yaml_input"]
      }
    },
    {
      "tool_id": "validateSection",
      "description": "Validates required fields and logic structure",
      "input_schema": {
        "type": "object",
        "properties": {
          "section_yaml": { "type": "string" }
        },
        "required": ["section_yaml"]
      }
    },
    {
      "tool_id": "logReasoningTrace",
      "description": "Stores reasoning trace for each toolchain run",
      "input_schema": {
        "type": "object",
        "properties": {
          "trace_yaml": { "type": "string" }
        },
        "required": ["trace_yaml"]
      }
    },
    {
      "tool_id": "commitSection",
      "description": "Saves validated section to Drive and DB",
      "input_schema": {
        "type": "object",
        "properties": {
          "section_id": { "type": "string" },
          "author": { "type": "string" },
          "content": { "type": "string" }
        },
        "required": ["section_id", "author", "content"]
      }
    },
    {
      "tool_id": "commitDocument",
      "description": "Assembles and stores full artifact",
      "input_schema": {
        "type": "object",
        "properties": {
          "doc_id": { "type": "string" }
        },
        "required": ["doc_id"]
      }
    },
    {
      "tool_id": "fetchDocument",
      "description": "Retrieves section or full document",
      "input_schema": {
        "type": "object",
        "properties": {
          "doc_id": { "type": "string" },
          "section_id": { "type": "string" }
        },
        "required": ["doc_id", "section_id"]
      }
    },
    {
      "tool_id": "getTokenUsage",
      "description": "Tracks GPT session size and overflow risk",
      "input_schema": {
        "type": "object",
        "properties": {
          "session_id": { "type": "string" }
        },
        "required": ["session_id"]
      }
    },
    {
      "tool_id": "translateDocument",
      "description": "Converts document language (EN ⇆ FR)",
      "input_schema": {
        "type": "object",
        "properties": {
          "doc_id": { "type": "string" },
          "target_lang": { "type": "string", "enum": ["en", "fr"] }
        },
        "required": ["doc_id", "target_lang"]
      }
    },
    {
      "tool_id": "queryAirtable",
      "description": "Looks up structured reference mappings",
      "input_schema": {
        "type": "object",
        "properties": {
          "table": { "type": "string" },
          "filter": { "type": "string" }
        },
        "required": ["table", "filter"]
      }
    },
    {
      "tool_id": "parseTranscript",
      "description": "Converts transcripts to YAML insights",
      "input_schema": {
        "type": "object",
        "properties": {
          "transcript_text": { "type": "string" }
        },
        "required": ["transcript_text"]
      }
    },
    {
      "tool_id": "doc_feedback_to_task",
      "description": "Converts feedback into new planner tasks",
      "input_schema": {
        "type": "object",
        "properties": {
          "feedback_log": { "type": "string" }
        },
        "required": ["feedback_log"]
      }
    },
    {
      "tool_id": "diff_and_summarize_sections",
      "description": "Computes section diffs and summarizes changes",
      "input_schema": {
        "type": "object",
        "properties": {
          "original": { "type": "string" },
          "revised": { "type": "string" }
        },
        "required": ["original", "revised"]
      }
    },
    {
      "tool_id": "submitDocumentFeedback",
      "description": "Captures user feedback on drafts",
      "input_schema": {
        "type": "object",
        "properties": {
          "doc_id": { "type": "string" },
          "user": { "type": "string" },
          "feedback": { "type": "string" }
        },
        "required": ["doc_id", "user", "feedback"]
      }
    },
    {
      "tool_id": "summarize_feedback_log",
      "description": "Synthesizes feedback entries into summary",
      "input_schema": {
        "type": "object",
        "properties": {
          "feedback_log": { "type": "string" }
        },
        "required": ["feedback_log"]
      }
    },
    {
      "tool_id": "createSessionSnapshot",
      "description": "Generate a YAML snapshot of all PromptLog entries for a session, used by planner for grounding and replay.",
      "input_schema": {
        "type": "object",
        "properties": {
          "session_id": {
            "type": "string",
            "description": "Optional session ID to filter which prompt logs to include"
          }
        },
        "required": []
      }
    },
    {
      "tool_id": "uploadTextInput",
      "description": "Ingest freeform text input into the memory system",
      "input_schema": {
        "type": "object",
        "properties": {
          "text": { "type": "string" },
          "metadata": {
            "type": "object",
            "properties": {
              "gate_id": { "type": "integer" },
              "artifact_id": { "type": "string" },
              "section_id": { "type": "string" },
              "intent": { "type": "string" },
              "session_id": { "type": "string" },
              "user_id": { "type": "string" }
            }
          }
        },
        "required": ["text"]
      }
    },
    {
      "tool_id": "uploadFileInput",
      "description": "Extract and ingest file contents into the memory system",
      "input_schema": {
        "type": "object",
        "properties": {
          "file_path": { "type": "string" },
          "file_content": { "type": "string" },
          "metadata": {
            "type": "object",
            "properties": {
              "gate_id": { "type": "integer" },
              "artifact_id": { "type": "string" },
              "section_id": { "type": "string" },
              "intent": { "type": "string" },
              "session_id": { "type": "string" },
              "user_id": { "type": "string" }
            }
          }
        },
        "anyOf": [
          { "required": ["file_path"] },
          { "required": ["file_content"] }
        ]
      }
    },
    {
      "tool_id": "uploadLinkInput",
      "description": "Scrape and ingest webpage content into the memory system",
      "input_schema": {
        "type": "object",
        "properties": {
          "url": { "type": "string" },
          "metadata": {
            "type": "object",
            "properties": {
              "gate_id": { "type": "integer" },
              "artifact_id": { "type": "string" },
              "section_id": { "type": "string" },
              "intent": { "type": "string" },
              "session_id": { "type": "string" },
              "user_id": { "type": "string" }
            }
          }
        },
        "required": ["url"]
      }
    },
    {
      "tool_id": "loadCorpus",
      "description": "Embeds and indexes documents into KB",
      "input_schema": {
        "type": "object",
        "properties": {
          "file_contents": { "type": "string" },
          "file_name": { "type": "string" },
          "metadata": {
            "type": "object",
            "properties": {
              "gate_id": { "type": "integer" },
              "artifact_id": { "type": "string" },
              "section_id": { "type": "string" },
              "intent": { "type": "string" },
              "session_id": { "type": "string" },
              "user_id": { "type": "string" }
            }
          }
        },
        "required": ["file_contents"]
      }
    },
    {
      "tool_id": "memory_retrieve",
      "description": "Retrieves relevant PromptLog entries for a given artifact and section",
      "input_schema": {
        "type": "object",
        "properties": {
          "artifact": { "type": "string" },
          "section": { "type": "string" },
          "session_id": { "type": "string" },
          "user_id": { "type": "string" }
        },
        "required": ["artifact", "section"]
      }
    },
    {
      "tool_id": "section_synthesizer",
      "description": "Drafts a section using OpenAI from retrieved memory entries",
      "input_schema": {
        "type": "object",
        "properties": {
          "memory": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "input_summary": { "type": "string" },
                "full_input_path": { "type": "string" },
                "timestamp": { "type": "string" }
              }
            }
          }
        },
        "required": ["memory"]
      }
    },
    {
      "tool_id": "section_refiner",
      "description": "Refines section draft for tone, clarity, grammar using OpenAI",
      "input_schema": {
        "type": "object",
        "properties": {
          "raw_draft": { "type": "string" }
        },
        "required": ["raw_draft"]
      }
    },
    {
      "tool_id": "loadSectionMetadata",
      "description": "Loads and sorts drafted artifact sections for a given gate and artifact",
      "input_schema": {
        "type": "object",
        "properties": {
          "artifact_id": { "type": "string" },
          "gate_id": { "type": "string" }
        },
        "required": ["artifact_id", "gate_id"]
      }
    },
    {
      "tool_id": "formatSection",
      "description": "Formats a section using a Jinja Markdown template",
      "input_schema": {
        "type": "object",
        "properties": {
          "section_id": { "type": "string" },
          "section_text": { "type": "string" },
          "template_url": { "type": "string" }
        },
        "required": ["section_id", "section_text", "template_url"]
      }
    },
    {
      "tool_id": "mergeSections",
      "description": "Merges formatted sections into a complete markdown body",
      "input_schema": {
        "type": "object",
        "properties": {
          "sections": {
            "type": "array",
            "items": { "type": "string" }
          }
        },
        "required": ["sections"]
      }
    },
    {
      "tool_id": "finalizeDocument",
      "description": "Adds title, metadata, and table of contents to a markdown document",
      "input_schema": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "document_body": { "type": "string" },
          "version": { "type": "string" },
          "artifact_id": { "type": "string" },
          "gate_id": { "type": "string" }
        },
        "required": ["title", "document_body", "version", "artifact_id", "gate_id"]
      }
    },
    {
      "tool_id": "commitArtifact",
      "description": "Saves finalized document locally and logs output location",
      "input_schema": {
        "type": "object",
        "properties": {
          "final_markdown": { "type": "string" },
          "artifact_id": { "type": "string" },
          "gate_id": { "type": "string" },
          "version": { "type": "string" },
          "title": { "type": "string" }
        },
        "required": ["final_markdown", "artifact_id", "gate_id", "version", "title"]
      }
    }
  ]
}